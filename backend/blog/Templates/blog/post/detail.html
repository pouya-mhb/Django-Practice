{% extends "blog/base.html" %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <article class="card shadow-sm mb-4">
            <div class="card-body">
                <h2 class="card-title">{{ post.title }}</h2>
                <p class="text-muted mb-3">
                    Published {{ post.publish|date:"F d, Y" }} by {{ post.author }}
                </p>
                <div class="card-text">
                    {{ post.body|linebreaks }}
                </div>
            </div>
        </article>

        <a href="{% url 'blog:post_list' %}" class="btn btn-outline-secondary btn-sm">
            ‚Üê Back to all posts
        </a>
        <a href="{% url 'blog:post_share' post.id %}" class="btn btn-outline-primary btn-sm">
            üì§ Share this post
        </a>
    </div>
    <div class="col-lg-8">
        <h3>Comments</h3>
        {% for comment in post.comments.all %}
        <article class="card shadow-sm mb-4">
            <div class="card-body">
                <p><strong>{{ comment.name }}</strong> says:</p>
                <p>{{ comment.body|linebreaks }}</p>
                <p class="text-muted">{{ comment.created|date:"F d, Y H:i" }}</p>
            </div>
        </article>
        {% empty %}
        <p>No comments yet.</p>
        {% endfor %}
        <h3>Leave a comment</h3>
        {% if new_comment %}
        <p>Your comment has been added successfully.</p>
        {% else %}
        <form method="post">
            {% csrf_token %}
            {{ comment_form.as_p }}
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        {% endif %}
    </div>
    <div class="col-lg-8">
        <h3>Similar Posts</h3>
        {% for similar_post in similar_posts %}
        <h4>
            <a href="{{ similar_post.get_absolute_url }}" class="text-decoration-none text-blue">
                {{ similar_post.title }}
            </a>
        </h4>
        {% empty %}
        <p>No similar posts found.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}